# โปรแกรมจัดการและวิเคราะห์อัตราแลกเปลี่ยนเงินตรา

โครงงานนี้เป็นสคริปต์ python สำหรับดึงข้อมูลอัตราแลกเปลี่ยนเงินตราจาก api ภายนอก, จัดเก็บลงในฐานข้อมูล sqlite, และทำการวิเคราะห์ข้อมูลเบื้องต้น

## วัตถุประสงค์ของโครงงาน

*   ดึงข้อมูลอัตราแลกเปลี่ยนล่าสุดจาก fixer.io api
*   จัดเก็บข้อมูลสกุลเงิน, อัตราแลกเปลี่ยน, และวันที่ลงในฐานข้อมูล sqlite เพื่อการใช้งานในอนาคต
*   แสดงผลการวิเคราะห์ข้อมูลเบื้องต้น เช่น สกุลเงินที่มีอัตราต่ำสุด/สูงสุด, ค่าเฉลี่ยของอัตราแลกเปลี่ยน, และ 5 อันดับอัตราแลกเปลี่ยนสูงสุด/ต่ำสุด

## คุณสมบัติหลัก

*   เชื่อมต่อกับ fixer.io api เพื่อดึงข้อมูลอัตราแลกเปลี่ยน (ต้องใช้ access key)
*   สร้างฐานข้อมูล sqlite (`exchange_rates.db`) และตาราง (`exchange_rates`) โดยอัตโนมัติหากยังไม่มี
*   บันทึกข้อมูลอัตราแลกเปลี่ยนของสกุลเงินต่างๆ พร้อมวันที่ของข้อมูล
*   แสดงข้อมูลอัตราแลกเปลี่ยนทั้งหมดที่จัดเก็บไว้
*   ค้นหาและแสดงสกุลเงินที่มีอัตราแลกเปลี่ยนต่ำที่สุด
*   ค้นหาและแสดงสกุลเงินที่มีอัตราแลกเปลี่ยนสูงที่สุด
*   คำนวณและแสดงค่าเฉลี่ยของอัตราแลกเปลี่ยนทั้งหมดที่บันทึกไว้
*   แสดง 5 อันดับสกุลเงินที่มีอัตราแลกเปลี่ยนสูงสุด
*   แสดง 5 อันดับสกุลเงินที่มีอัตราแลกเปลี่ยนต่ำสุด

## ขั้นตอนการทำงานของโปรแกรม

1.  **ดึงข้อมูล:** สคริปต์ทำการร้องขอ (request) ข้อมูลอัตราแลกเปลี่ยนล่าสุดจาก `https://data.fixer.io/api/latest` โดยใช้ access key ที่ระบุ
2.  **ประมวลผลข้อมูล:** ข้อมูลที่ได้รับในรูปแบบ json จะถูกแปลง (parse) เพื่อให้ง่ายต่อการใช้งาน
3.  **เชื่อมต่อฐานข้อมูล:** สคริปต์เชื่อมต่อกับฐานข้อมูล sqlite ชื่อ `exchange_rates.db` หากไม่มีฐานข้อมูลหรือตาราง `exchange_rates` อยู่ โปรแกรมจะสร้างขึ้นใหม่
4.  **บันทึกข้อมูล:** ข้อมูลสกุลเงิน (currency), อัตราแลกเปลี่ยน (rate), และวันที่ (date) จาก api จะถูกบันทึกลงในตาราง `exchange_rates`
5.  **แสดงผลและวิเคราะห์:**
    *   แสดงข้อมูลทั้งหมดในตาราง
    *   ค้นหาและแสดงสกุลเงินที่มีอัตราต่ำสุดและสูงสุด
    *   คำนวณและแสดงค่าเฉลี่ยของอัตราแลกเปลี่ยนทั้งหมด
    *   แสดง 5 อันดับสกุลเงินที่มีอัตราแลกเปลี่ยนสูงสุดและต่ำสุด
6.  **ปิดการเชื่อมต่อ:** เมื่อดำเนินการเสร็จสิ้น สคริปต์จะปิดการเชื่อมต่อกับฐานข้อมูล

## แหล่งข้อมูล

*   ข้อมูลอัตราแลกเปลี่ยนได้มาจาก fixer.io api (จำเป็นต้องมี access key ส่วนตัว)

## การติดตั้งและใช้งาน

1.  ตรวจสอบว่าได้ติดตั้ง python 3 บนระบบของคุณ
2.  ติดตั้งไลบรารีที่จำเป็น:
    ```bash
    pip install requests
    ```
3.  **สำคัญ:** แก้ไขค่า `access_key` ในสคริปต์ python ด้วย access key ที่ถูกต้องของคุณจาก fixer.io
    ```python
    response = requests.get('https://data.fixer.io/api/latest?access_key=your_actual_access_key')
    ```
4.  รันสคริปต์จาก command line:
    ```bash
    python your_script_name.py
    ```
    (แทนที่ `your_script_name.py` ด้วยชื่อไฟล์สคริปต์ของคุณ)
5.  ผลลัพธ์การวิเคราะห์จะแสดงบนหน้าจอ และข้อมูลจะถูกจัดเก็บไว้ในไฟล์ `exchange_rates.db` ในไดเรกทอรีเดียวกับสคริปต์

## ข้อจำกัดและแนวทางการพัฒนาเพิ่มเติม

*   **ข้อจำกัด:**
    *   การทำงานของสคริปต์ขึ้นอยู่กับการเข้าถึง fixer.io api และความถูกต้องของ access key
    *   ข้อมูลที่ได้จะเป็นข้อมูลล่าสุด ณ เวลาที่ api ของ fixer.io อัปเดต
    *   การคำนวณค่าเฉลี่ยในโค้ดปัจจุบัน (`select currency, avg(rate) from exchange_rates limit 1`) จะแสดงค่าเฉลี่ยของอัตราแลกเปลี่ยนทั้งหมด แต่จะแสดงชื่อสกุลเงินเพียงสกุลเดียว (สกุลเงินแรกที่พบ) ซึ่งอาจไม่สื่อความหมายโดยตรงว่าเป็น "average currency"
*   **แนวทางการพัฒนา:**
    *   เพิ่มการจัดการข้อผิดพลาด (error handling) เช่น กรณี api ไม่สามารถเข้าถึงได้ หรือ access key ไม่ถูกต้อง
    *   เพิ่มทางเลือกให้ผู้ใช้สามารถระบุสกุลเงินหลัก (base currency) ที่ต้องการได้ (หาก api รองรับในแพ็กเกจที่ใช้)
    *   พัฒนาให้สามารถดึงข้อมูลย้อนหลังตามช่วงวันที่ที่กำหนดได้
    *   เพิ่มส่วนติดต่อผู้ใช้แบบกราฟิก (gui) เพื่อให้ใช้งานง่ายขึ้น
    *   ปรับปรุงการแสดงผลค่าเฉลี่ยให้ชัดเจนยิ่งขึ้น หรือคำนวณค่าเฉลี่ยสำหรับแต่ละสกุลเงินหากมีการเก็บข้อมูลหลายวัน
    *   เพิ่มความสามารถในการสร้างกราฟเพื่อแสดงแนวโน้มของอัตราแลกเปลี่ยน
